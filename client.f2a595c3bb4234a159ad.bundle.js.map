{"version":3,"sources":["webpack:///./src/theme/theme.ts","webpack:///./src/services/game/consts.ts","webpack:///./src/services/game/state.ts","webpack:///./src/services/game/selectors.ts","webpack:///./src/services/game/actions/placeToken.ts","webpack:///./src/services/game/utils.ts","webpack:///./src/services/game/actions/reset.ts","webpack:///./src/index.tsx","webpack:///./src/style.css?9819","webpack:///./src/style.css","webpack:///./src/root.tsx","webpack:///./src/theme/components/ThemeProvider.tsx","webpack:///./src/store/components/StoreProvider.tsx","webpack:///./src/store/store.ts","webpack:///./src/store/reducer.ts","webpack:///./src/state.ts","webpack:///./src/services/game/reducer/index.ts","webpack:///./src/services/game/reducer/placeToken.ts","webpack:///./src/services/game/reducer/reset.ts","webpack:///./src/store/saga.ts","webpack:///./src/store/devtool-sanitizer.ts","webpack:///./src/components/App.tsx","webpack:///./src/components/Game.tsx","webpack:///./src/components/Field.tsx","webpack:///./src/components/Grid.tsx","webpack:///./src/components/GridVisual.tsx","webpack:///./src/components/PositionedToken.tsx","webpack:///./src/components/Token.tsx","webpack:///./src/components/ResetButton.tsx"],"names":["tokenSizePx","squareSizePx","gridSizePx","TOKENS_PER_GRID","GRIDS","defaultGameState","Object","freeze","turn","tokens","fill","Array","gameStateSelector","state","services","game","createGameSelector","localSelector","selector","createSelector","local","iterateGridWinLines","gridPositions","y","getTokenIndexXY","x","tokensSelector","turnSelector","winLinesComputed","from","g","getTokenIndexXYG","rowMajor","rowMinor","columnMajor","columnMinor","iterateWinLines","winLines","uniqBy","join","winningEntry","winLine","tokensMatchWinLine","token","positions","i","length","winningToken","entry","winningPositions","ACTION_PLACE_TOKEN","placeToken","position","type","payload","action","grid","ACTION_RESET","reset","rootEl","document","getElementById","ReactDOM","render","content","module","options","locals","exports","push","children","theme","Provider","store","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","actionSanitizer","stateSanitizer","actionsBlacklist","compose","sagaMiddleware","applyMiddleware","run","createStore","servicesReducer","combineReducers","defaultAppState","gameReducer","isPlaceTokenAction","set","isResetAction","useSelector","range","map","gridIndex","Math","floor","key","width","height","gridTokenIndex","getTokenArrayIndex","childOffset","lineChildren","x1","y1","x2","y2","arrayChildren","React","Children","toArray","contentChildren","transform","strokeWidth","stroke","dispatcher","useDispatch","tokenState","isWinning","winningPosition","includes","onClick","useCallback","isWinningToken","tokenType","size","TokenX","color","TokenO","cx","cy","r","TokenBlank","dispatch"],"mappings":"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","file":"client.f2a595c3bb4234a159ad.bundle.js","sourcesContent":["const theme = {\r\n  tokenSizePx: 20,\r\n  squareSizePx: 30,\r\n  gridSizePx: 30 * 3 + 20\r\n};\r\nexport default theme;\r\n\r\nexport type Theme = typeof theme;\r\n","export const TOKENS_PER_GRID = 9;\r\nexport const GRIDS = 9;\r\n","import { fill } from \"lodash\";\r\n\r\nimport { TokenType } from \"./types\";\r\nimport { GRIDS, TOKENS_PER_GRID } from \"./consts\";\r\n\r\nexport type TokenState = TokenType | \"blank\";\r\n\r\nexport type TokensArray = TokenState[];\r\nexport interface GameState {\r\n  turn: TokenType;\r\n  tokens: TokensArray;\r\n}\r\n\r\nexport const defaultGameState: Readonly<GameState> = Object.freeze({\r\n  turn: \"x\",\r\n  tokens: fill(new Array(TOKENS_PER_GRID * GRIDS), \"blank\") as TokensArray\r\n});\r\n","import { createSelector } from \"reselect\";\r\nimport { uniqBy } from \"lodash\";\r\n\r\nimport { AppState, AppSelector } from \"@/state\";\r\n\r\nimport { GameState, TokensArray } from \"./state\";\r\n\r\nimport { getTokenIndexXYG, getTokenIndexXY } from \"./utils\";\r\nimport { TokenType } from \"./types\";\r\n\r\ntype LocalGameSelector<T> = (state: GameState) => T;\r\n\r\ntype GameSelector<T> = AppSelector<T> & { local: LocalGameSelector<T> };\r\n\r\nfunction gameStateSelector(state: AppState) {\r\n  return state.services.game;\r\n}\r\n\r\nfunction createGameSelector<T>(\r\n  localSelector: LocalGameSelector<T>\r\n): GameSelector<T> {\r\n  const selector: GameSelector<T> = createSelector(\r\n    gameStateSelector,\r\n    localSelector\r\n  ) as any;\r\n  selector.local = localSelector;\r\n  return selector;\r\n}\r\n\r\nexport const tokensSelector = (state: AppState) => state.services.game.tokens;\r\nexport const turnSelector = (state: AppState) => state.services.game.turn;\r\n\r\ninterface WinningEntry {\r\n  token: TokenType;\r\n  positions: [number, number, number];\r\n}\r\n\r\n// There is porbably a more elegant way of finding the win lines...\r\n\r\nfunction* iterateGridWinLines(\r\n  gridPositions: number[]\r\n): Iterable<[number, number, number]> {\r\n  // horiz\r\n  for (let y = 0; y < 3; y++) {\r\n    yield [\r\n      gridPositions[getTokenIndexXY(0, y)],\r\n      gridPositions[getTokenIndexXY(1, y)],\r\n      gridPositions[getTokenIndexXY(2, y)]\r\n    ];\r\n  }\r\n\r\n  // vert\r\n  for (let x = 0; x < 3; x++) {\r\n    yield [\r\n      gridPositions[getTokenIndexXY(x, 0)],\r\n      gridPositions[getTokenIndexXY(x, 1)],\r\n      gridPositions[getTokenIndexXY(x, 2)]\r\n    ];\r\n  }\r\n\r\n  // cross\r\n  yield [\r\n    gridPositions[getTokenIndexXY(0, 0)],\r\n    gridPositions[getTokenIndexXY(1, 1)],\r\n    gridPositions[getTokenIndexXY(2, 2)]\r\n  ];\r\n  yield [\r\n    gridPositions[getTokenIndexXY(2, 0)],\r\n    gridPositions[getTokenIndexXY(1, 1)],\r\n    gridPositions[getTokenIndexXY(0, 2)]\r\n  ];\r\n}\r\n\r\nfunction* iterateWinLines(): Iterable<[number, number, number]> {\r\n  // Grids\r\n  for (let g = 0; g < 3; g++) {\r\n    yield* iterateGridWinLines([\r\n      getTokenIndexXYG(0, 0, g),\r\n      getTokenIndexXYG(1, 0, g),\r\n      getTokenIndexXYG(2, 0, g),\r\n      getTokenIndexXYG(0, 1, g),\r\n      getTokenIndexXYG(1, 1, g),\r\n      getTokenIndexXYG(2, 1, g),\r\n      getTokenIndexXYG(0, 2, g),\r\n      getTokenIndexXYG(1, 2, g),\r\n      getTokenIndexXYG(2, 2, g)\r\n    ]);\r\n  }\r\n\r\n  // Grid row slices\r\n  for (let rowMajor = 0; rowMajor < 3; rowMajor++) {\r\n    for (let rowMinor = 0; rowMinor < 3; rowMinor++) {\r\n      yield* iterateGridWinLines([\r\n        getTokenIndexXYG(0, rowMinor, rowMajor * 3),\r\n        getTokenIndexXYG(1, rowMinor, rowMajor * 3),\r\n        getTokenIndexXYG(2, rowMinor, rowMajor * 3),\r\n        getTokenIndexXYG(0, rowMinor, rowMajor * 3 + 1),\r\n        getTokenIndexXYG(1, rowMinor, rowMajor * 3 + 1),\r\n        getTokenIndexXYG(2, rowMinor, rowMajor * 3 + 1),\r\n        getTokenIndexXYG(0, rowMinor, rowMajor * 3 + 2),\r\n        getTokenIndexXYG(1, rowMinor, rowMajor * 3 + 2),\r\n        getTokenIndexXYG(2, rowMinor, rowMajor * 3 + 2)\r\n      ]);\r\n    }\r\n  }\r\n\r\n  // Grid row cross axis\r\n  for (let rowMajor = 0; rowMajor < 3; rowMajor++) {\r\n    yield* iterateGridWinLines([\r\n      getTokenIndexXYG(0, 0, rowMajor * 3),\r\n      getTokenIndexXYG(0, 1, rowMajor * 3),\r\n      getTokenIndexXYG(0, 2, rowMajor * 3),\r\n      getTokenIndexXYG(1, 0, rowMajor * 3 + 1),\r\n      getTokenIndexXYG(1, 1, rowMajor * 3 + 1),\r\n      getTokenIndexXYG(1, 2, rowMajor * 3 + 1),\r\n      getTokenIndexXYG(2, 0, rowMajor * 3 + 2),\r\n      getTokenIndexXYG(2, 1, rowMajor * 3 + 2),\r\n      getTokenIndexXYG(2, 2, rowMajor * 3 + 2)\r\n    ]);\r\n    yield* iterateGridWinLines([\r\n      getTokenIndexXYG(0, 0, rowMajor * 3 + 2),\r\n      getTokenIndexXYG(0, 1, rowMajor * 3 + 2),\r\n      getTokenIndexXYG(0, 2, rowMajor * 3 + 2),\r\n      getTokenIndexXYG(1, 0, rowMajor * 3 + 1),\r\n      getTokenIndexXYG(1, 1, rowMajor * 3 + 1),\r\n      getTokenIndexXYG(1, 2, rowMajor * 3 + 1),\r\n      getTokenIndexXYG(2, 0, rowMajor * 3),\r\n      getTokenIndexXYG(2, 1, rowMajor * 3),\r\n      getTokenIndexXYG(2, 2, rowMajor * 3)\r\n    ]);\r\n  }\r\n\r\n  // Grid column slices\r\n  for (let columnMajor = 0; columnMajor < 3; columnMajor++) {\r\n    for (let columnMinor = 0; columnMinor < 3; columnMinor++) {\r\n      yield* iterateGridWinLines([\r\n        getTokenIndexXYG(columnMinor, 0, columnMajor),\r\n        getTokenIndexXYG(columnMinor, 1, columnMajor),\r\n        getTokenIndexXYG(columnMinor, 2, columnMajor),\r\n        getTokenIndexXYG(columnMinor, 0, columnMajor + 3),\r\n        getTokenIndexXYG(columnMinor, 1, columnMajor + 3),\r\n        getTokenIndexXYG(columnMinor, 2, columnMajor + 3),\r\n        getTokenIndexXYG(columnMinor, 0, columnMajor + 6),\r\n        getTokenIndexXYG(columnMinor, 1, columnMajor + 6),\r\n        getTokenIndexXYG(columnMinor, 2, columnMajor + 6)\r\n      ]);\r\n    }\r\n  }\r\n\r\n  // Grid column cross axis\r\n  for (let columnMajor = 0; columnMajor < 3; columnMajor++) {\r\n    yield* iterateGridWinLines([\r\n      getTokenIndexXYG(0, 0, columnMajor),\r\n      getTokenIndexXYG(1, 0, columnMajor),\r\n      getTokenIndexXYG(2, 0, columnMajor),\r\n      getTokenIndexXYG(0, 1, columnMajor + 3),\r\n      getTokenIndexXYG(1, 1, columnMajor + 3),\r\n      getTokenIndexXYG(2, 1, columnMajor + 3),\r\n      getTokenIndexXYG(0, 2, columnMajor + 6),\r\n      getTokenIndexXYG(1, 2, columnMajor + 6),\r\n      getTokenIndexXYG(2, 2, columnMajor + 6)\r\n    ]);\r\n    yield* iterateGridWinLines([\r\n      getTokenIndexXYG(0, 0, columnMajor + 6),\r\n      getTokenIndexXYG(1, 0, columnMajor + 6),\r\n      getTokenIndexXYG(2, 0, columnMajor + 6),\r\n      getTokenIndexXYG(0, 1, columnMajor + 3),\r\n      getTokenIndexXYG(1, 1, columnMajor + 3),\r\n      getTokenIndexXYG(2, 1, columnMajor + 3),\r\n      getTokenIndexXYG(0, 2, columnMajor),\r\n      getTokenIndexXYG(1, 2, columnMajor),\r\n      getTokenIndexXYG(2, 2, columnMajor)\r\n    ]);\r\n  }\r\n\r\n  // // Crosses for second-level grid.\r\n  yield [\r\n    getTokenIndexXYG(0, 0, 0),\r\n    getTokenIndexXYG(1, 1, 4),\r\n    getTokenIndexXYG(2, 2, 8)\r\n  ];\r\n  yield [\r\n    getTokenIndexXYG(2, 0, 2),\r\n    getTokenIndexXYG(1, 1, 4),\r\n    getTokenIndexXYG(0, 2, 6)\r\n  ];\r\n}\r\n\r\n// Generating each combination of boards producees significant duplicates.\r\n//  Clean up the dups to simplify the list\r\nconst winLinesComputed = Array.from(iterateWinLines());\r\nconst winLines = uniqBy(winLinesComputed, x => x.join(\"-\"));\r\n\r\nconst winningEntry = createSelector(\r\n  (state: GameState) => state.tokens,\r\n  tokens => {\r\n    for (const winLine of winLines) {\r\n      const winningToken = tokensMatchWinLine(tokens, winLine);\r\n      if (!winningToken) {\r\n        continue;\r\n      }\r\n\r\n      const entry: WinningEntry = {\r\n        token: winningToken,\r\n        positions: winLine\r\n      };\r\n\r\n      return entry;\r\n    }\r\n\r\n    return null;\r\n  }\r\n);\r\n\r\nfunction tokensMatchWinLine(\r\n  tokens: TokensArray,\r\n  winLine: [number, number, number]\r\n): TokenType | null {\r\n  const token = tokens[winLine[0]];\r\n  if (token === \"blank\") {\r\n    return null;\r\n  }\r\n\r\n  for (let i = 1; i < winLine.length; i++) {\r\n    if (tokens[winLine[i]] !== token) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  return token;\r\n}\r\n\r\nexport const winningToken = createGameSelector<TokenType | null>(state => {\r\n  const entry = winningEntry(state);\r\n  if (entry) {\r\n    return entry.token;\r\n  }\r\n\r\n  return null;\r\n});\r\n\r\nexport const winningPositions = createGameSelector<number[] | null>(state => {\r\n  const entry = winningEntry(state);\r\n  if (entry) {\r\n    return entry.positions;\r\n  }\r\n\r\n  return null;\r\n});\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_PLACE_TOKEN = \"@game/place-token\";\r\nexport const placeToken = (position: number) =>\r\n  ({\r\n    type: ACTION_PLACE_TOKEN,\r\n    payload: { position }\r\n  } as const);\r\nexport type PlaceTokenAction = ReturnType<typeof placeToken>;\r\nexport function isPlaceTokenAction(\r\n  action: AnyAction\r\n): action is PlaceTokenAction {\r\n  return action.type === ACTION_PLACE_TOKEN;\r\n}\r\n","import { TOKENS_PER_GRID } from \"./consts\";\r\n\r\n/**\r\n * Calculate the tokens array index of a particular token slot.\r\n * @param grid The grid index.  0 is upper left, 8 is lower right.\r\n * @param position The position inside the grid.  0 is upper left, 8 is lower right.\r\n */\r\nexport function getTokenArrayIndex(grid: number, position: number): number {\r\n  return grid * 9 + position;\r\n}\r\n\r\n/**\r\n * Calculate the index of a token from x and y without regard for which grid.\r\n * @param x\r\n * @param y\r\n */\r\nexport function getTokenIndexXYG(x: number, y: number, g: number): number {\r\n  return g * TOKENS_PER_GRID + getTokenIndexXY(x, y);\r\n}\r\n\r\nexport function getTokenIndexXY(x: number, y: number): number {\r\n  return y * 3 + x;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_RESET = \"@game/reset\";\r\nexport const reset = () =>\r\n  ({\r\n    type: ACTION_RESET\r\n  } as const);\r\ntype ResetAction = ReturnType<typeof reset>;\r\nexport function isResetAction(action: AnyAction): action is ResetAction {\r\n  return action.type === ACTION_RESET;\r\n}\r\n","import \"resize-observer-polyfill\";\r\n\r\nimport \"@/style.css\";\r\n\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\nimport Root from \"./root\";\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\nif (rootEl) {\r\n  ReactDOM.render(<Root />, rootEl);\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./style.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/*\\r\\nThis should be kept minimal and only provide globals\\r\\nor non-react component styles.\\r\\n*/\\r\\n\\r\\nhtml, body, #root {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  margin: 0;\\r\\n}\", \"\"]);\n","import * as React from \"react\";\r\n\r\nimport ThemeProvider from \"@/theme/components/ThemeProvider\";\r\nimport StoreProvider from \"@/store/components/StoreProvider\";\r\n\r\nimport App from \"@/components/App\";\r\n\r\nconst Root: React.FC = () => (\r\n  <ThemeProvider>\r\n    <StoreProvider>\r\n      <App />\r\n    </StoreProvider>\r\n  </ThemeProvider>\r\n);\r\n\r\nexport default Root;\r\n","import * as React from \"react\";\r\n\r\nimport { ThemeProvider as JssProvider } from \"react-jss\";\r\n\r\nimport theme from \"../theme\";\r\n\r\nconst ThemeProvider: React.FC = ({ children }) => (\r\n  <JssProvider theme={theme}>\r\n    <>{children}</>\r\n  </JssProvider>\r\n);\r\n\r\nexport default ThemeProvider;\r\n","import * as React from \"react\";\r\n\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport store from \"../store\";\r\n\r\nconst StoreProvider: React.FC = ({ children }) => (\r\n  <Provider store={store}>{children}</Provider>\r\n);\r\nexport default StoreProvider;\r\n","import {\r\n  compose,\r\n  createStore as createReduxStore,\r\n  applyMiddleware\r\n} from \"redux\";\r\n\r\nimport createSagaMiddleware from \"redux-saga\";\r\n\r\nimport reducer from \"./reducer\";\r\nimport saga from \"./saga\";\r\n\r\nimport {\r\n  actionSanitizer,\r\n  stateSanitizer,\r\n  actionsBlacklist\r\n} from \"./devtool-sanitizer\";\r\n\r\nfunction createStore() {\r\n  const composeEnhancers =\r\n    (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ &&\r\n      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n        actionSanitizer,\r\n        stateSanitizer,\r\n        actionsBlacklist\r\n      })) ||\r\n    compose;\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n\r\n  const store = createReduxStore(\r\n    reducer,\r\n    composeEnhancers(applyMiddleware(sagaMiddleware))\r\n  );\r\n  sagaMiddleware.run(saga);\r\n  return store;\r\n}\r\n\r\nconst store = createStore();\r\nexport default store;\r\n","import { combineReducers, AnyAction, Reducer } from \"redux\";\r\n\r\nimport { AppState, defaultAppState } from \"@/state\";\r\nimport gameReducer from \"@/services/game/reducer\";\r\nimport { GameState } from \"@/services/game/state\";\r\n\r\nconst servicesReducer = combineReducers({\r\n  // reduce-reducer types are not aligning with redux types\r\n  game: gameReducer as Reducer<GameState>\r\n});\r\n\r\nexport default function reducer(\r\n  state: AppState = defaultAppState,\r\n  action: AnyAction\r\n): AppState {\r\n  return {\r\n    services: servicesReducer(state.services, action)\r\n  };\r\n}\r\n","import { GameState, defaultGameState } from \"./services/game/state\";\r\n\r\nexport interface AppState {\r\n  services: {\r\n    game: GameState;\r\n  };\r\n}\r\n\r\nexport const defaultAppState: Readonly<AppState> = Object.freeze({\r\n  services: {\r\n    game: defaultGameState\r\n  }\r\n});\r\n\r\nexport type AppSelector<T = any> = (state: Readonly<AppState>) => T;\r\n","import reduceReducers from \"reduce-reducers\";\r\n\r\nimport placeTokenReducer from \"./placeToken\";\r\nimport { GameState } from \"../state\";\r\nimport resetReducer from \"./reset\";\r\n\r\nconst gameReducer = reduceReducers<GameState>(placeTokenReducer, resetReducer);\r\nexport default gameReducer;\r\n","import { AnyAction } from \"redux\";\r\nimport { set as setFp } from \"lodash/fp\";\r\n\r\nimport { GameState, defaultGameState } from \"../state\";\r\nimport { isPlaceTokenAction } from \"../actions/placeToken\";\r\nimport { winningPositions } from \"../selectors\";\r\n\r\nexport default function placeTokenReducer(\r\n  state: GameState = defaultGameState,\r\n  action: AnyAction\r\n): GameState {\r\n  if (!isPlaceTokenAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  // Dont place a token if someone already won.\r\n  if (winningPositions.local(state)) {\r\n    return state;\r\n  }\r\n\r\n  const { position } = action.payload;\r\n\r\n  if (state.tokens[position] !== \"blank\") {\r\n    return state;\r\n  }\r\n\r\n  state = {\r\n    ...state,\r\n    tokens: setFp([position], state.turn, state.tokens),\r\n    turn: state.turn === \"x\" ? \"o\" : \"x\"\r\n  };\r\n\r\n  return state;\r\n}\r\n","import { GameState, defaultGameState } from \"../state\";\r\nimport { AnyAction } from \"redux\";\r\nimport { isResetAction } from \"@/services/game/actions/reset\";\r\n\r\nexport default function resetReducer(\r\n  state: GameState = defaultGameState,\r\n  action: AnyAction\r\n): GameState {\r\n  if (!isResetAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  return defaultGameState;\r\n}\r\n","import { fork } from \"redux-saga/effects\";\r\n\r\nexport default function* rootSaga(): IterableIterator<any> {}\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nexport const actionsBlacklist: string[] = [];\r\n\r\nexport function actionSanitizer(action: AnyAction): AnyAction {\r\n  return action;\r\n}\r\n\r\nexport function stateSanitizer(state: AppState): any {\r\n  return state;\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport Game from \"./Game\";\r\n\r\nconst App: React.FC = () => {\r\n  return <Game />;\r\n};\r\n\r\nexport default App;\r\n","import * as React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { range } from \"lodash\";\r\n\r\nimport { GRIDS } from \"@/services/game/consts\";\r\nimport { turnSelector } from \"@/services/game/selectors\";\r\n\r\nimport theme from \"@/theme/theme\";\r\n\r\nimport Field from \"./Field\";\r\nimport Grid from \"./Grid\";\r\nimport ResetButton from \"./ResetButton\";\r\n\r\nconst Game: React.FC = () => {\r\n  const turn = useSelector(turnSelector);\r\n  return (\r\n    <div>\r\n      <Field>\r\n        {range(0, GRIDS).map(gridIndex => {\r\n          const x = gridIndex % 3;\r\n          const y = Math.floor(gridIndex / 3);\r\n          return (\r\n            <Grid\r\n              key={gridIndex}\r\n              gridIndex={gridIndex}\r\n              x={theme.gridSizePx * x + 20}\r\n              y={theme.gridSizePx * y + 20}\r\n            />\r\n          );\r\n        })}\r\n      </Field>\r\n      <div>Turn: {turn}</div>\r\n      <ResetButton />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","import * as React from \"react\";\r\n\r\nimport theme from \"@/theme/theme\";\r\n\r\nconst Field: React.FC = ({ children }) => {\r\n  return (\r\n    <svg width={theme.gridSizePx * 3 + 50} height={theme.gridSizePx * 3 + 50}>\r\n      {children}\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Field;\r\n","import * as React from \"react\";\r\nimport { range } from \"lodash\";\r\n\r\nimport { TOKENS_PER_GRID } from \"@/services/game/consts\";\r\nimport { getTokenArrayIndex } from \"@/services/game/utils\";\r\n\r\nimport GridVisual from \"./GridVisual\";\r\nimport PositionedToken from \"./PositionedToken\";\r\n\r\nexport interface GridProps {\r\n  x: number;\r\n  y: number;\r\n  gridIndex: number;\r\n}\r\n\r\nconst Grid: React.FC<GridProps> = ({ x, y, gridIndex }) => {\r\n  return (\r\n    <GridVisual x={x} y={y}>\r\n      {range(0, TOKENS_PER_GRID).map(gridTokenIndex => {\r\n        const position = getTokenArrayIndex(gridIndex, gridTokenIndex);\r\n        return <PositionedToken key={position} position={position} />;\r\n      })}\r\n    </GridVisual>\r\n  );\r\n};\r\n\r\nexport default Grid;\r\n","import * as React from \"react\";\r\n\r\nimport theme from \"@/theme/theme\";\r\n\r\nconst childOffset = (theme.squareSizePx - theme.tokenSizePx) / 2;\r\n\r\nexport interface GridProps {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nconst GridVisual: React.FC<GridProps> = ({ x, y, children }) => {\r\n  const lineChildren: React.ReactNode[] = [];\r\n  for (let i = 1; i <= 2; i++) {\r\n    lineChildren.push(\r\n      <line\r\n        key={`x${i}`}\r\n        x1={0}\r\n        y1={theme.squareSizePx * i}\r\n        x2={theme.squareSizePx * 3}\r\n        y2={theme.squareSizePx * i}\r\n      />\r\n    );\r\n    lineChildren.push(\r\n      <line\r\n        key={`y${i}`}\r\n        y1={0}\r\n        x1={theme.squareSizePx * i}\r\n        y2={theme.squareSizePx * 3}\r\n        x2={theme.squareSizePx * i}\r\n      />\r\n    );\r\n  }\r\n\r\n  const arrayChildren = React.Children.toArray(children);\r\n  const contentChildren: React.ReactNode[] = [];\r\n  for (let i = 0; i < arrayChildren.length; i++) {\r\n    const x = i % 3;\r\n    const y = Math.floor(i / 3);\r\n    contentChildren.push(\r\n      <g\r\n        transform={`translate(${theme.squareSizePx * x +\r\n          childOffset}, ${theme.squareSizePx * y + childOffset})`}\r\n        key={`ch${i}`}\r\n      >\r\n        {arrayChildren[i]}\r\n      </g>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <g transform={`translate(${x}, ${y})`}>\r\n      <g strokeWidth={1} stroke=\"black\">\r\n        {lineChildren}\r\n      </g>\r\n      {contentChildren}\r\n    </g>\r\n  );\r\n};\r\n\r\nexport default GridVisual;\r\n","import * as React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { AppState } from \"@/state\";\r\nimport { placeToken } from \"@/services/game/actions/placeToken\";\r\nimport { winningPositions } from \"@/services/game/selectors\";\r\n\r\nimport Token from \"./Token\";\r\n\r\nconst PositionedToken: React.FC<{ position: number }> = ({ position }) => {\r\n  const dispatcher = useDispatch();\r\n  const tokenState = useSelector(\r\n    (state: AppState) => state.services.game.tokens[position]\r\n  );\r\n\r\n  let isWinning = false;\r\n  const winningPosition = useSelector(winningPositions);\r\n  if (winningPosition && winningPosition.includes(position)) {\r\n    isWinning = true;\r\n  }\r\n\r\n  const onClick = React.useCallback(() => {\r\n    dispatcher(placeToken(position));\r\n  }, [position]);\r\n\r\n  return (\r\n    <Token\r\n      isWinningToken={isWinning}\r\n      tokenType={tokenState}\r\n      onClick={onClick}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PositionedToken;\r\n","import * as React from \"react\";\r\n\r\nimport theme from \"@/theme/theme\";\r\nimport { TokenType } from \"@/services/game/types\";\r\n\r\nexport interface TokenProps {\r\n  tokenType: TokenType | \"blank\";\r\n  isWinningToken: boolean;\r\n  onClick?(e: React.MouseEvent<SVGGElement>): void;\r\n}\r\n\r\ninterface TokenPartProps {\r\n  color: string;\r\n  onClick?(e: React.MouseEvent<SVGGElement>): void;\r\n}\r\n\r\nconst size = theme.tokenSizePx;\r\n\r\nconst TokenX: React.FC<TokenPartProps> = ({ onClick, color }) => (\r\n  <g strokeWidth={1} stroke={color} onClick={onClick}>\r\n    <rect strokeWidth={0} fill=\"transparent\" width={size} height={size} />\r\n    <line x1={0} y1={0} x2={size} y2={size} />\r\n    <line x1={size} y1={0} x2={0} y2={size} />\r\n  </g>\r\n);\r\nconst TokenO: React.FC<TokenPartProps> = ({ onClick, color }) => (\r\n  <g strokeWidth={1} stroke={color} fill=\"none\" onClick={onClick}>\r\n    <rect strokeWidth={0} fill=\"transparent\" width={size} height={size} />\r\n    <circle cx={size / 2} cy={size / 2} r={size / 2} />\r\n  </g>\r\n);\r\n\r\nconst TokenBlank: React.FC<TokenPartProps> = ({ onClick }) => (\r\n  <rect fill=\"transparent\" width={size} height={size} onClick={onClick} />\r\n);\r\n\r\nconst Token: React.FC<TokenProps> = ({\r\n  tokenType,\r\n  isWinningToken,\r\n  onClick\r\n}) => {\r\n  const color = isWinningToken ? \"red\" : \"black\";\r\n  switch (tokenType) {\r\n    case \"x\":\r\n      return <TokenX color={color} onClick={onClick} />;\r\n    case \"o\":\r\n      return <TokenO color={color} onClick={onClick} />;\r\n    case \"blank\":\r\n      return <TokenBlank color=\"transparent\" onClick={onClick} />;\r\n    default:\r\n      return <div>Error</div>;\r\n  }\r\n};\r\n\r\nexport default Token;\r\n","import * as React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport { reset } from \"@/services/game/actions/reset\";\r\n\r\nconst ResetButton: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  const onClick = React.useCallback(() => {\r\n    dispatch(reset());\r\n  }, [dispatch]);\r\n\r\n  return <button onClick={onClick}>Reset</button>;\r\n};\r\n\r\nexport default ResetButton;\r\n"],"sourceRoot":""}